<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Seniors Benefits Hub</title>

    <!-- Your external stylesheet (kept) -->
    <link rel="stylesheet" href="englf3.css" />

    <!-- Font Awesome (kept) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Google Tag Manager -->
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-KC9BXK73');
    </script>
    <!-- End Google Tag Manager -->

    <!-- ========= RINGBA ========= -->
    <script
      id="ringba-script"
      src="//b-js.ringba.com/CA1a16b597ee204279b113debdbea8413c"
      async
      onload="window.__ringbaLoaded=true; console.log('[Ringba] script loaded');"
      onerror="window.__ringbaBlocked=true; console.warn('[Ringba] script blocked or failed to load');"
    ></script>

    <script>
      // ---- Safe Ringba tag queue ----
      window._rgba_tags = window._rgba_tags || [];

      // Keys (case-sensitive — adjust if your Tag Pipe uses different casing)
      const RINGBA_AGE_KEY = 'age';
      const RINGBA_AB_KEY  = 'ab';

      // Generic pusher (forces lowercase values)
      function rbPushTag(key, value) {
        try {
          const val = (value || '').toString().toLowerCase(); // convert to lowercase safely
          const tag = {};
          tag[key] = val;
          // also echo lowercase value into newsbreak_cid
          tag['newsbreak_cid'] = val;
          window._rgba_tags.push(tag);
          console.log('[Ringba] pushed (lowercase):', tag, '→ _rgba_tags:', window._rgba_tags);
        } catch (e) {
          console.warn('[Ringba] push failed', e);
        }
      }

      // Specific helpers
      function rbAge(value) { rbPushTag(RINGBA_AGE_KEY, value); }
      function rbAB(value)  { rbPushTag(RINGBA_AB_KEY, value); }
    </script>
    <!-- ========= END RINGBA ========= -->

    <!-- ===== NB "raw_call" INSTRUMENTATION (UI + console verification) ===== -->
    <style>
      /* CTA anchor styling so the whole block is clickable */
      .div22 {
        display: block;
        width: 100%;
        max-width: 520px;
        margin: 12px auto;
        padding: 16px 22px;
        border-radius: 12px;
        background: #1bb06f;
        color: #ffffff !important;
        text-align: center;
        text-decoration: none !important;
        font-weight: 800;
        letter-spacing: 0.5px;
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.15);
        cursor: pointer;
        transition: transform 0.06s ease, box-shadow 0.2s ease, filter 0.2s ease;
      }
      .div22:hover { box-shadow: 0 16px 30px rgba(0,0,0,0.18); filter: brightness(1.03); }
      .div22:active { transform: translateY(1px) scale(0.995); }
      .div22 * { color: inherit; text-decoration: none !important; pointer-events: none; }

      .glow { box-shadow: 0 0 0 rgba(27,176,111,0.5), 0 10px 24px rgba(0,0,0,0.15); }
      .shimmer { position: relative; overflow: hidden; isolation: isolate; }
      .shimmer::after {
        content: ""; position: absolute; inset: 0 -150% 0 0; transform: skewX(-20deg);
        background: linear-gradient(90deg,transparent 0%,rgba(255,255,255,0.22) 50%,transparent 100%);
        animation: sh 2.2s infinite;
      }
      @keyframes sh { 0%{transform:translateX(-100%) skewX(-20deg);} 100%{transform:translateX(100%) skewX(-20deg);} }

      /* NB chip */
      #nb-chip {
        position: fixed; right: 12px; bottom: 12px; z-index: 99999;
        padding: 8px 12px; font-size: 12px; font-weight: 700;
        border-radius: 999px; background: rgba(20,180,90,0.95); color: #fff;
        box-shadow: 0 6px 20px rgba(0,0,0,0.2); display: none; pointer-events: none;
      }

      /* Responsive desktop/mobile logos */
      .logo-desktop, .logo-mobile { display: none !important; max-width: 100%; height: auto; }
      @media (min-width: 769px) { .logo-desktop { display: block !important; width: auto; } }
      @media (max-width: 768px) { .logo-mobile  { display: block !important; width: auto; } }

      /* 🔒 Hide only the footer logos during verification */
      body.hide-logos .logo-desktop,
      body.hide-logos .logo-mobile {
        display: none !important;
      }
    </style>

    <script>
      // Local NB log
      window.__nb_events = window.__nb_events || [];

      function showNbChip(text) {
        var chip = document.getElementById('nb-chip');
        if (!chip) return;
        chip.textContent = text;
        chip.style.display = 'inline-block';
        clearTimeout(window.__nb_chip_to);
        window.__nb_chip_to = setTimeout(function(){ chip.style.display='none'; }, 2000);
      }

      // Fire raw_call safely and visibly
      function fireNbRawCall() {
        try {
          window.__nb_events.push({ event: 'raw_call', at: new Date().toISOString() });
          console.log('[NB Pixel] Firing raw_call', window.__nb_events[window.__nb_events.length - 1]);

          if (typeof nbpix === 'function') {
            nbpix('event', 'raw_call');
          } else {
            console.warn('[NB Pixel] nbpix not ready; queueing');
            window.__nb_fallback_queue = window.__nb_fallback_queue || [];
            window.__nb_fallback_queue.push(['event', 'raw_call']);
          }

          showNbChip('NB: raw_call sent');
        } catch (e) {
          console.warn('[NB Pixel] raw_call failed', e);
        }
      }

      // Flush queued NB events once ready
      window.addEventListener('load', function () {
        if (window.__nb_fallback_queue && typeof nbpix === 'function') {
          window.__nb_fallback_queue.forEach(function (args) {
            try { nbpix.apply(null, args); } catch (_) {}
          });
          window.__nb_fallback_queue.length = 0;
        }
      });
    </script>
    <!-- ===== END NB INSTRUMENTATION ===== -->
  </head>

  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KC9BXK73"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- <div id="nb-chip">NB: raw_call sent</div> -->

    <div class="div1" onclick="smoothScrollToTop(1000, 432)" style="cursor: pointer;">
      <p style="font-size:1.3em;">Seniors Benefits Hub</p>
    </div>

    <div class="div6">
      <div class="div7">
        <div class="div8" onclick="smoothScrollToTop(1000, 432)" style="cursor: pointer;">
          Seniors On Medicare Can Claim Their Food Allowance Card Worth Thousands Of Dollars!
        </div>
        <img class="div9" src="./food2.png" alt="Money in hand" onclick="smoothScrollToTop(1000, 432)" style="cursor: pointer;" />
        <div class="div10">
          Checking your eligibility is very simple and takes just 60 seconds,
          simply answer the questions below to see if you qualify now.
        </div>
        <div class="arrow-section"><i class="fa-solid fa-angle-down"></i></div>
        <div class="div11"><div class="div12">Answer The Question Below To Proceed:</div></div>
      </div>

      <div class="div13">
        <div class="div14"><span id="quizQuestion">1. What's Your Age Range?</span></div>
        <div class="div15" id="answerOptions">
          <!-- Q1: Age options (pushes Ringba age) -->
          <div class="div16" onclick="answerAge('Under 64')">Under 64</div>
          <div class="div16" onclick="answerAge('64-69')">64-69</div>
          <div class="div16" onclick="answerAge('70-74')">70-74</div>
          <div class="div16" onclick="answerAge('75+')">75+</div>
        </div>
      </div>
    </div>

    <!-- STATUS (verification) -->
    <div class="div4 div5" id="status">
      <span id="statusMessage"></span>
    </div>

    <!-- CONGRATS -->
    <div class="div4 div5" id="congratulations">
      <div class="div19">Congratulations, You Qualify 🎉</div>
      <div class="div20">
        Make A <span>Quick Call</span> To Claim Your Spending Allowance Worth Thousands Now!
      </div>
      <div class="div21">Spots remaining: 4</div>
      <div class="div99"><h2>Tap Below To Call Now! 👇</h2></div>

      <!-- WHOLE DIV CLICKABLE: single anchor -->
      <a href="tel:+13236897861" id="callLink" class="div22 glow shimmer" onpointerdown="fireNbRawCall()">CALL (323) 689-7861</a>

      <div class="div23">
        Due to high call volume, your official agent is waiting for only
        <strong>3 minutes</strong>, then your spot will not be reserved.
      </div>
      <div class="div24">
        <div class="div25" id="minutes">2</div>
        <div class="div25">:</div>
        <div class="div25" id="seconds">52</div>
      </div>
    </div>

    <!-- Footer + responsive logos -->
    <div class="div26" id="footer">
      <img src="./desktop.png" class="logo-desktop" alt="Desktop Logo" />
      <img src="./mobile.png" class="logo-mobile" alt="Mobile Logo" />
      This website is operated by a marketing and lead generation company. We are not a government agency, insurance provider, or financial institution. Our role is to connect consumers with licensed professionals, carriers, or service providers who can discuss available options. We do not make eligibility determinations or provide coverage, financing, or government benefits directly.
      <br />
      Beware of other fraudulent & similar-looking websites that might look exactly like ours, we have no affiliation with them. This is the only official website to claim your Spending Allowance Benefit with the domain name seniorsbenefitshub.com
      <div class="div27">
        <a href="/terms.html">Terms & Conditions</a> |
        <a href="/privacy.html">Privacy Policy</a>
      </div>
    </div>

    <div id="image-container" style="display:none">
      <img src="baarish.GIF" alt="" />
    </div>

    <!-- ====== Console helpers ====== -->
    <script>
      // Devtools:
      //   window._rgba_tags.slice(-5)  -> last Ringba tags
      //   window.__nb_events.slice(-5) -> last NB events fired
    </script>

    <!-- ====== Quiz logic (Q1 -> Q2 -> Q3 -> Verify -> Congrats) ====== -->
    <script>
      // ======== PHONE LOGIC (ACA DID for Under 64) ========
      const DEFAULT_DID = "+13236897861";
      const ACA_DID     = "+18336638513"; // ← your ACA DID

      function digitsOnly(p){ return (p||"").replace(/\D/g,""); }
      function formatUS(e164){
        const d = digitsOnly(e164);
        // allow leading "1"
        if (d.length === 11 && d.startsWith("1")) {
          return `(${d.slice(1,4)}) ${d.slice(4,7)}-${d.slice(7,11)}`;
        } else if (d.length === 10) {
          return `(${d.slice(0,3)}) ${d.slice(3,6)}-${d.slice(6,10)}`;
        }
        return e164; // fallback
      }

      function setCallNumber(e164){
        const link = document.getElementById("callLink");
        if (!link) return;
        link.setAttribute("href", `tel:${e164}`);
        link.textContent = `CALL ${formatUS(e164)}`;
      }

      // Initialize default number on load
      window.addEventListener("DOMContentLoaded", function(){
        setCallNumber(DEFAULT_DID);
      });

      // ======== ELEMENTS ========
      const statusDiv          = document.getElementById("status");
      const statusMessage      = document.getElementById("statusMessage");
      const congratulationsDiv = document.getElementById("congratulations");
      const quizText           = document.getElementById("quizQuestion");
      const answerOptions      = document.getElementById("answerOptions");
      const minutesEl          = document.getElementById("minutes");
      const secondsEl          = document.getElementById("seconds");
      const imageContainer     = document.getElementById("image-container");

      // Steps: 1=Age, 2=Citizen, 3=Medicare A/B (Yes/No), then verify
      let currentStep = 1;

      // Counters (if you still use them elsewhere)
      const counter = document.getElementById("counter");
      const claim   = document.getElementById("claim");

      // Ensure NB fires before tel: navigation (extra-safe)
      (function attachCallHandler() {
        const link = document.getElementById('callLink');
        if (!link) return;
        link.addEventListener('click', function () {
          try { fireNbRawCall(); } catch (_) {}
        }, { passive: true });
      })();

      // Demo counters, kept
      setInterval(() => {
        if (counter) {
          let previousNumber = parseInt(counter.innerText.replace(/,/g, ""));
          let randomIncrement = Math.floor(Math.random() * 3) + 1;
          let newNumber = previousNumber + randomIncrement;
          counter.innerText = newNumber.toLocaleString();
        }
      }, 3000);

      setInterval(() => {
        if (claim) {
          let previousNumber = parseInt(claim.innerText);
          let randomIncrement = Math.floor(Math.random() * 2) + 1;
          claim.innerText = previousNumber + randomIncrement;
        }
      }, 3000);

      // ---- Navigation helpers ----
      function setYesNoOptionsForCitizen() {
        quizText.textContent = "2. Are you a U.S. Citizen?";
        answerOptions.innerHTML = `
          <div class="div16" onclick="answerCitizen('Yes')">Yes</div>
          <div class="div16" onclick="answerCitizen('No')">No</div>
        `;
      }

      function setYesNoOptionsForAB() {
        // Q3 text and options (Ringba 'ab' sent on click)
        quizText.textContent = "3. Are You Currently Enrolled in Medicare Part A or Part B?";
        answerOptions.innerHTML = `
          <div class="div16" onclick="answerAB('Yes')">Yes</div>
          <div class="div16" onclick="answerAB('No')">No</div>
        `;
      }

      // ---- Q1: Age ----
      function answerAge(ageValue) {
        if (ageValue) rbAge(ageValue); // push Ringba 'age'

        // 🚨 Switch to ACA DID if "Under 64"
        if ((ageValue || "").toLowerCase() === "under 64") {
          setCallNumber(ACA_DID);
        } else {
          setCallNumber(DEFAULT_DID);
        }

        currentStep = 2;
        setYesNoOptionsForCitizen();
        smoothScrollToTop(900, 432);
      }

      // ---- Q2: Citizen ----
      function answerCitizen(val) {
        // (No Ringba push for this step per your spec)
        currentStep = 3;
        setYesNoOptionsForAB();
        smoothScrollToTop(900, 432);
      }

      // ---- Q3: Part A/B enrollment (Yes/No) ----
      function answerAB(val) {
        // Push Ringba 'ab' with selected option ("Yes" or "No")
        rbAB(val);
        // Proceed to verify and then show congrats
        stepProcess();
      }

      // Verification + transition
      const stepProcess = () => {
        smoothScrollToTop(800);
        const mainContent = document.querySelector(".div6");
        if (mainContent) mainContent.classList.add("div5");

        // Hide only the footer logos during verification
        document.body.classList.add('hide-logos');

        statusDiv.classList.remove("div5");
        statusMessage.textContent = "Reviewing Your Answers...";
        setTimeout(() => {
          statusMessage.textContent = "Verifying Availability...";
          setTimeout(() => {
            statusMessage.textContent = "Confirming Eligibility...";
            setTimeout(() => {
              showCongratulations();
            }, 1200);
          }, 1200);
        }, 1200);
      };

      function showCongratulations() {
        statusDiv.classList.add("div5");
        congratulationsDiv.classList.remove("div5");

        // Show logos again after verification completes
        document.body.classList.remove('hide-logos');

        imageContainer.style.display = "block";
        startTimer();
        setTimeout(() => { imageContainer.style.display = "none"; }, 2000);
        setTimeout(() => {
          window.scrollTo({ top: 0, behavior: "smooth" });
        }, 100);
      }

      function startTimer() {
        let totalSeconds = 172;
        const timer = setInterval(() => {
          const minutes = Math.floor(totalSeconds / 60);
          const seconds = totalSeconds % 60;
          minutesEl.textContent = minutes;
          secondsEl.textContent = seconds < 10 ? "0" + seconds : seconds;
          totalSeconds--;
          if (totalSeconds < 0) clearInterval(timer);
        }, 1000);
      }

      // Smooth scroll helper
      function smoothScrollToTop(duration, targetPosition = 0) {
        const startPosition = window.pageYOffset;
        const distance = targetPosition - startPosition;
        let startTime = null;
        function animation(currentTime) {
          if (startTime === null) startTime = currentTime;
          const timeElapsed = currentTime - startTime;
          const run = ease(timeElapsed, startPosition, distance, duration);
          window.scrollTo(0, run);
          if (timeElapsed < duration) requestAnimationFrame(animation);
        }
        function ease(t, b, c, d) {
          t /= d / 2;
          if (t < 1) return (c / 2) * t * t + b;
          t--;
          return (-c / 2) * (t * (t - 2) - 1) + b;
        }
        requestAnimationFrame(animation);
      }

      // No-op kept if referenced elsewhere
      function handleCall() {}
    </script>
  </body>
</html>
